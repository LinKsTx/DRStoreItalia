<!-- /NAVBAR/ -->
<!-- xs sm, luego se expande. (versión encogido) -->
<div class="container-fluid d-block d-lg-none bg-light">
    <nav id="navegador" class="navbar navbar-expand-sm navbar-light monolisk m-0 fs-4">
      <!-- contenedor (logo + botón (forma colapsada) + navbar -->
      <div id="contenedor-navegador" class="container-fluid">
          <!-- logo -->
          <a class="navbar-brand" href="#" style="width: 100px">
              <img src="../../../assets/images/logo-oscuro.png" style="width: 110px;" alt="logo-drstoreitalia">
          </a>
          <!-- botón para navbar colapsado -->
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navexpandible">
              <span class="navbar-toggler-icon"></span>
          </button>
          <!-- navbar colapsado, expandido (a partir de sm) -->
          <div id="navexpandible" class="collapse navbar-collapse text-center">
              <!-- div home, productos, blog y contacto con flujo a la izquierda -->
              <div id="hpbc" class="me-auto">
                  <ul class="navbar-nav">
                      <!-- #home -->
                      <li class="nav-item m-2">
                          <a class="nav-link" [routerLink]="['home']" [routerLinkActive]="['active']" [routerLinkActiveOptions]="{exact: true}">HOME</a>
                      </li>
                       <!-- #productos -->
                       <li class="nav-item m-2">
                        <a class="nav-link" [routerLink]="['productos']" [routerLinkActive]="['active']" [routerLinkActiveOptions]="{exact: true}">PRODUCTOS</a>
                      </li>
                      <!-- #blog -->
                      <li class="nav-item m-2">
                          <a class="nav-link" [routerLink]="['blog']" [routerLinkActive]="['active']" [routerLinkActiveOptions]="{exact: true}">BLOG</a>
                      </li>
                      <!-- #contacto -->
                      <li class="nav-item m-2">
                          <a class="nav-link" [routerLink]="['contacto']" [routerLinkActive]="['active']" [routerLinkActiveOptions]="{exact: true}">CONTACTO</a>
                      </li>
                  </ul>
              </div>
              <!-- div iniciar sesión con flujo a la derecha -->
              <div id="inicio-sesion" class="ms-auto">
                  <ul class="navbar-nav">
                      <li class="nav-item">
                          <!-- enlace hacia modal #iniciar-sesión/logout -->
                          <a class="nav-link pointer-cursor nowrap" href="#" data-bs-toggle="modal" data-bs-target="#iniciar-sesion" *ngIf="usuarioactivo.nombre.length === 0">INICIAR SESIÓN</a>
                      </li>
                      <!-- sesion iniciada -->
                      <li class="nav-item dropdown m-2 estilohover" *ngIf="usuarioactivo.nombre.length > 0">
                        <a class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"><span><i class="bi bi-person"></i>&nbsp;{{usuarioactivo.nick}}</span></a>
                        <ul class="dropdown-menu text-center bg-light ">
                          <li><a class="nav-link pointer-cursor fs-5 animate__animated animate__fadeInDown" href="#">CUENTA</a></li>
                          <li><a class="nav-link pointer-cursor fs-5 animate__animated animate__fadeInDown" *ngIf="usuarioactivo.tipo == 1" href="#">PEDIDOS</a></li>
                          <li><a class="nav-link pointer-cursor fs-5 animate__animated animate__fadeInDown" href="#" (click)="logOut()">CERRAR SESIÓN</a></li>
                        </ul>
                      </li>
                      <!-- carrito de compra (manda a productos o click para verlos ¿? arreglar)-->
                      <li class="nav-item m-2 estilohover" *ngIf="usuarioactivo.nombre.length > 0 && usuarioactivo.tipo == 1">
                        <a class="nav-link" role="button"><span><i class="bi bi-cart"></i></span></a>
                      </li>
                      <!-- configuración admin -->
                      <li class="nav-item" *ngIf="usuarioactivo.tipo == 2">
                          <!-- modal inicio de sesión / creación de usuario -->
                        <a class="nav-link m-2" href="#"><i class="bi bi-gear"></i></a>
                    </li>
                  </ul>
              </div>
          </div>
      </div>
  </nav>
</div>
<!-- /NAVBAR/ -->
<!-- desde lg, luego se expande. (versión normal) -->
<div class="container-fluid d-none d-lg-flex justify-content-center bg-light">
    <nav id="navegador" class="navbar navbar-expand-sm navbar-light monolisk m-0 fs-4 w-50">
      <!-- contenedor (logo + botón (forma colapsada) + navbar -->
      <div id="contenedor-navegador" class="container-fluid">
          <!-- logo -->
          <a class="navbar-brand" href="#" style="width: 100px">
              <img src="../../../assets/images/logo-oscuro.png" style="width: 110px;" alt="logo-drstoreitalia">
          </a>
          <!-- botón para navbar colapsado -->
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navexpandible">
              <span class="navbar-toggler-icon"></span>
          </button>
          <!-- navbar colapsado, expandido (a partir de sm) -->
          <div id="navexpandible" class="collapse navbar-collapse text-center">
              <!-- div home, productos, blog y contacto con flujo a la izquierda -->
              <div id="hpbc" class="me-auto">
                  <ul class="navbar-nav">
                      <!-- #home -->
                      <li class="nav-item m-2">
                          <a class="nav-link" [routerLink]="['home']" [routerLinkActive]="['active']" [routerLinkActiveOptions]="{exact: true}">HOME</a>
                      </li>
                      <!-- #productos -->
                      <li class="nav-item m-2">
                          <a class="nav-link" [routerLink]="['productos']" [routerLinkActive]="['active']" [routerLinkActiveOptions]="{exact: true}">PRODUCTOS</a>
                      </li>
                      <!-- #blog -->
                      <li class="nav-item m-2">
                          <a class="nav-link" [routerLink]="['blog']" [routerLinkActive]="['active']" [routerLinkActiveOptions]="{exact: true}">BLOG</a>
                      </li>
                      <!-- #contacto -->
                      <li class="nav-item m-2">
                          <a class="nav-link" [routerLink]="['contacto']" [routerLinkActive]="['active']" [routerLinkActiveOptions]="{exact: true}">CONTACTO</a>
                      </li>
                  </ul>
              </div>
              <!-- div iniciar sesión con flujo a la derecha -->
              <div id="inicio-sesion" class="ms-auto">
                  <ul class="navbar-nav">
                    <!-- sesión sin iniciar -->
                      <li class="nav-item" >
                          <!-- modal inicio de sesión / creación de usuario -->
                          <a class="nav-link pointer-cursor nowrap" href="#" data-bs-toggle="modal" data-bs-target="#iniciar-sesion" *ngIf="usuarioactivo.nombre.length === 0">INICIAR SESIÓN</a>
                      </li>
                      <!-- sesion iniciada -->
                      <li class="nav-item dropdown m-2 estilo-hover escritorio-hover" *ngIf="usuarioactivo.nombre.length > 0">
                        <a class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"><span><i class="bi bi-person"></i>&nbsp;{{usuarioactivo.nick}}</span></a>
                        <ul class="dropdown-menu text-center bg-light border-bot border-left border-right">
                          <li><a class="nav-link pointer-cursor fs-5 animate__animated animate__fadeInDown" href="#" data-bs-toggle="modal" data-bs-target="#cuenta">CUENTA</a></li>
                          <li><a class="nav-link pointer-cursor fs-5 animate__animated animate__fadeInDown" *ngIf="usuarioactivo.tipo == 1" href="#">PEDIDOS</a></li>
                          <li><a class="nav-link pointer-cursor fs-5 animate__animated animate__fadeInDown pointer" (click)="logOut()">CERRAR SESIÓN</a></li>
                        </ul>
                      </li>
                      <!-- carrito de compra -->
                      <li class="nav-item dropdown m-2 estilo-hover escritorio-hover" *ngIf="usuarioactivo.nombre.length > 0 && usuarioactivo.tipo == 1">
                        <a class="nav-link dropdown-toggle dropdown-toggle w-100" role="button" data-bs-toggle="dropdown"><span><i class="bi bi-cart"></i></span></a>
                        <ul class="dropdown-menu text-center bg-light">
                            <!-- elementos de carrito -->
                            <li><a class="nav-link fs-5 animate__animated animate__fadeInDown pointer">PRODUCTOS</a></li>
                        </ul>
                      </li>
                      <!-- configuración admin -->
                      <li class="nav-item" *ngIf="usuarioactivo.tipo == 2">
                        <a class="nav-link m-2" href="#"><i class="bi bi-gear"></i></a>
                    </li>
                  </ul>
              </div>
          </div>
      </div>
  </nav>
</div>
 <!-- /MODAL INICIO DE SESIÓN/ -->
<div class="modal fade" id="iniciar-sesion">
  <div class="modal-dialog modal-dialog-centered modal-fullscreen-sm-down">
      <div id="modal-completo" class="modal-content">
          <!-- Modal header -->
          <div id="modal-head" class="modal-header">
              <h4 id="titulo-modal" class="modal-title">Iniciar sesión</h4>
              <h4><i id="close-modal" class="bi bi-x-circle-fill" data-bs-dismiss="modal"></i></h4>
          </div>
          <!-- Modal body -->
          <div id="body-modal" class="modal-body">
              <form (ngSubmit)="logIn(iniciarSesion)" #iniciarSesion="ngForm">
                <!-- Correo -->
                <div class="mb-3">
                  <input type="email" class="form-control" placeholder="Email" name="email" [(ngModel)]="usuario.correo" required pattern="[a-zA-Z0-9!#$%&'*_+-]([\.]?[a-zA-Z0-9!#$%&'*_+-])+@[a-zA-Z0-9]([^@&%$\/()=?¿!.,:;]|\d)+[a-zA-Z0-9][\.][a-zA-Z]{2,4}([\.][a-zA-Z]{2})?" #correo="ngModel" [ngClass]="{'is-valid': !correo.invalid, 'is-invalid': correo.dirty && correo.invalid}">
                  <!-- Validación correo -->
                  <div *ngIf="correo.invalid && (correo.dirty)" class="alert p-0 m-0 val-error">
                    <div *ngIf="correo.errors?.['required']">
                      Introduce un correo.
                    </div>
                    <div *ngIf="correo.errors?.['pattern']">
                      El correo introducido no es válido.
                    </div>
                  </div>
                </div>
                <!-- Contraseña +  crear cuenta ¿? -->
                <div class="mb-3 mt-3">
                  <input type="password" class="form-control" placeholder="Contraseña" name="contrasenya" [(ngModel)]="usuario.contrasenya" required pattern="^(?=\w*\d)(?=\w*[A-Z])(?=\w*[a-z])\S{8,16}$" #contrasenya="ngModel" [ngClass]="{'is-valid': !contrasenya.invalid, 'is-invalid': contrasenya.dirty && contrasenya.invalid}">
                  <!-- Validación contraseña -->
                <div *ngIf="contrasenya.invalid && (contrasenya.dirty)" class="alert p-0 m-0 val-error">
                  <div *ngIf="contrasenya.errors?.['required']">
                    Introduce una contraseña.
                  </div>
                  <div *ngIf="contrasenya.errors?.['pattern']">
                    Contraseña no válida.
                  </div>
                </div>
                  <p *ngIf="boolean3" class="val-error">El correo y la contraseña no coinciden.</p>
                  <p class="d-flex flex-row-reverse m-2"><a href="" (click)="resetForm(iniciarSesion)" data-bs-toggle="modal" data-bs-target="#crear-usuario">Crear cuenta</a>¿Necesitas una cuenta? ‏‏‎‎</p>
                </div>
                <!-- Submit -->
                <div class="d-grid">
                    <button type="submit" class="btn btn-success" [disabled]="!iniciarSesion.form.valid">Iniciar sesión</button>
                </div>
              </form>
          </div>
      </div>
  </div>
</div>
<!-- /MODAL CREACIÓN DE USUARIO/ -->
<div class="modal fade" id="crear-usuario">
  <div class="modal-dialog modal-dialog-centered modal-fullscreen-sm-down">
      <div id="modal-completo" class="modal-content">
          <!-- Modal header -->
          <div id="modal-head" class="modal-header">
              <h4 id="titulo-modal" class="modal-title">Crear usuario</h4>
              <h4><i id="close-modal" class="bi bi-x-circle-fill" data-bs-dismiss="modal"></i></h4>
          </div>
          <!-- Modal body -->
          <div id="body-modal" class="modal-body">
            <!-- Formulario -->
            <form (ngSubmit)="crearUsuario(creacionUsuario);" class="" #creacionUsuario="ngForm">
              <!-- Nick -->
              <div class="mb-3">
                <input type="text" class="form-control" placeholder="Nick" name="Nick" [(ngModel)]="usuario.nick" required minlength="4" #nick="ngModel" [ngClass]="{'is-valid': !nick.invalid, 'is-invalid': nick.dirty && nick.invalid}">
                <!-- Validación nick-->
                <div *ngIf="nick.invalid && (nick.dirty)" class="alert p-0 m-0 val-error">
                  <div *ngIf="nick.errors?.['required']">
                    Introduce un nick.
                  </div>
                  <div *ngIf="nick.errors?.['minlength']">
                    El nick debe tener 4 carácteres o más.
                  </div>
                </div>
                <p *ngIf="boolean2" class="val-error">El nick ya existe.</p>
              </div>
              <!-- Nombre -->
              <div class="mb-3">
                <input type="text" class="form-control" placeholder="Nombre y apellidos" name="Nombre" [(ngModel)]="usuario.nombre" required minlength="5" pattern="^([a-zA-ZàáâäãåąčćęèéêëėįìíîïłńòóôöõøùúûüųūÿýżźñçčšžÀÁÂÄÃÅĄĆČĖĘÈÉÊËÌÍÎÏĮŁŃÒÓÔÖÕØÙÚÛÜŲŪŸÝŻŹÑßÇŒÆČŠŽ∂ð ,.'-]{2,}\s[a-zA-zàáâäãåąčćęèéêëėįìíîïłńòóôöõøùúûüųūÿýżźñçčšžÀÁÂÄÃÅĄĆČĖĘÈÉÊËÌÍÎÏĮŁŃÒÓÔÖÕØÙÚÛÜŲŪŸÝŻŹÑßÇŒÆČŠŽ∂ð ,.'-]{1,}'?-?[a-zA-ZàáâäãåąčćęèéêëėįìíîïłńòóôöõøùúûüųūÿýżźñçčšžÀÁÂÄÃÅĄĆČĖĘÈÉÊËÌÍÎÏĮŁŃÒÓÔÖÕØÙÚÛÜŲŪŸÝŻŹÑßÇŒÆČŠŽ∂ð ,.'-]{2,}\s?([a-zA-ZàáâäãåąčćęèéêëėįìíîïłńòóôöõøùúûüųūÿýżźñçčšžÀÁÂÄÃÅĄĆČĖĘÈÉÊËÌÍÎÏĮŁŃÒÓÔÖÕØÙÚÛÜŲŪŸÝŻŹÑßÇŒÆČŠŽ∂ð ,.'-]{1,})?)"  #nombre="ngModel" [ngClass]="{'is-valid': !nombre.invalid, 'is-invalid': nombre.dirty && nombre.invalid}">
                <!-- Validación nombre-->
                <div *ngIf="nombre.invalid && (nombre.dirty)" class="alert p-0 m-0 val-error">
                  <div *ngIf="nombre.errors?.['required']">
                    Introduce un nombre.
                  </div>
                  <div *ngIf="nombre.errors?.['minlength']">
                    El nombre debe tener 5 carácteres o más.
                  </div>
                  <div *ngIf="nombre.errors?.['pattern']">
                    Recuerda introducir los apellidos.
                  </div>
                </div>
              </div>
              <!-- Correo -->
              <div class="mb-3">
                <input type="email" class="form-control" placeholder="Email" name="email" [(ngModel)]="usuario.correo" required pattern="[a-zA-Z0-9!#$%&'*_+-]([\.]?[a-zA-Z0-9!#$%&'*_+-])+@[a-zA-Z0-9]([^@&%$\/()=?¿!.,:;]|\d)+[a-zA-Z0-9][\.][a-zA-Z]{2,4}([\.][a-zA-Z]{2})?" #email="ngModel" [ngClass]="{'is-valid': !email.invalid, 'is-invalid': email.dirty && email.invalid}">
                <!-- Validación correo -->
                <div *ngIf="email.invalid && (email.dirty)" class="alert p-0 m-0 val-error">
                  <div *ngIf="email.errors?.['required']">
                    Introduce un correo.
                  </div>
                  <div *ngIf="email.errors?.['pattern']">
                    El correo introducido no es válido.
                  </div>
                </div>
                <p *ngIf="boolean1" class="val-error">El correo ya existe.</p>
              </div>
              <!-- Contraseña -->
              <div class="mb-3 mt-3">
                <input type="password" class="form-control" placeholder="Contraseña" name="pass1" [(ngModel)]="usuario.contrasenya" required pattern="^(?=\w*\d)(?=\w*[A-Z])(?=\w*[a-z])\S{8,16}$" #pass1="ngModel" [ngClass]="{'is-valid': !pass1.invalid, 'is-invalid': pass1.dirty && pass1.invalid}">
                <!-- Validación contraseña -->
                <div *ngIf="pass1.invalid && (pass1.dirty)" class="alert p-0 m-0 val-error">
                  <div *ngIf="pass1.errors?.['required']">
                    Introduce una contraseña.
                  </div>
                  <div *ngIf="pass1.errors?.['pattern']">
                    La contraseña debe tener entre 8 y 16 caracteres y almenos una mayúscula, una minúscula y un número.
                  </div>
                </div>
              </div>
              <!-- Contraseña 2 + Iniciar sesión ¿? -->
              <div class="mb-3 mt-3">
                <input type="password" id="password2" class="form-control" placeholder="Repite la contraseña" name="pass2" [(ngModel)]="usuario.contrasenya2" required pattern="^(?=\w*\d)(?=\w*[A-Z])(?=\w*[a-z])\S{8,16}$" #pass2="ngModel" [ngClass]="{'is-valid': pass2.value == pass1.value, 'is-invalid': pass2.dirty && pass2.value != pass1.value}">
                <!-- Validación contraseña2 -->
                <div *ngIf="pass2.invalid && (pass2.dirty)" class="alert p-0 m-0 val-error">
                  <div *ngIf="pass2.errors?.['required']">
                    Vuelve a introducir la contraseña.
                  </div>
                  <div *ngIf="pass2.errors?.['pattern']">
                    Contraseña inválida.
                  </div>
                </div>
                <div class="val-error" *ngIf="pass2.value != pass1.value && pass2.dirty">
                  Las contraseñas no coinciden.
                </div>
                <p class="d-flex flex-row-reverse m-2"><a href="" (click)="resetForm(creacionUsuario)" data-bs-toggle="modal" data-bs-target="#iniciar-sesion">Inicia sesión</a>¿Ya tienes una cuenta?&nbsp;</p>
              </div>

              <!-- Submit-->
              <div class="d-grid">
                  <button type="submit" class="btn btn-success" [disabled]="(pass2.value != pass1.value) || nick.invalid || nombre.invalid || email.invalid || pass1.invalid" >Crear usuario</button>
              </div>
            </form>
          </div>
      </div>
  </div>
</div>

<!-- /MODAL CUENTA/ -->
<div class="modal fade" id="cuenta">
  <div class="modal-dialog modal-dialog-centered modal-fullscreen-sm-down">
      <div id="modal-completo" class="modal-content">
          <!-- Modal header -->
          <div id="modal-head" class="modal-header">
              <h4 id="titulo-modal" class="modal-title">Cuenta</h4>
              <h4><i id="close-modal" class="bi bi-x-circle-fill" data-bs-dismiss="modal"></i></h4>
          </div>
          <!-- Modal body -->
          <div id="body-modal" class="modal-body">
            <p>{{usuarioactivo.nick}}</p>
            <p>{{usuarioactivo.correo}}</p>
          </div>
      </div>
  </div>
</div>
